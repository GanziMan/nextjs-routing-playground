# Next.js App Router ì™„ë²½ ì •ë¦¬: Page Routerì—ì„œ App Routerë¡œ ì „í™˜í•˜ë©° ì•Œì•„ì•¼ í•  ê²ƒë“¤

Next.js 13 ì´í›„ ë„ì…ëœ **App Router**ëŠ” ë‹¨ìˆœí•œ ë¼ìš°íŒ… ë°©ì‹ì˜ ë³€í™”ê°€ ì•„ë‹Œ, **React 18ì˜ ê¸°ëŠ¥ì„ ë³¸ê²©ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” êµ¬ì¡°ì  ì „í™˜**ì…ë‹ˆë‹¤. ì´ ê¸€ì€ ê¸°ì¡´ Page Routerì—ì„œ App Routerë¡œ ì „í™˜í•˜ë©° ìƒê¸´ ë³€í™”ì™€ í•µì‹¬ ê°œë…ì„ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œì™€ í•¨ê»˜ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.

---

## âœ… App Router í•µì‹¬ ë³€í™”

1. React 18 ê¸°ëŠ¥ ë„ì…
2. ë°ì´í„° í˜ì¹­ ë°©ì‹ ë³€í™”
3. ë ˆì´ì•„ì›ƒ ê´€ë¦¬ ë°©ì‹ ë³€ê²½
4. í´ë” ê¸°ë°˜ í˜ì´ì§€ ë¼ìš°íŒ… ì ìš©

---

## ğŸ“ ë ˆì´ì•„ì›ƒ êµ¬ì„± ë°©ì‹

App Routerì—ì„œëŠ” í´ë” êµ¬ì¡°ê°€ ê³§ URLì…ë‹ˆë‹¤. ê¸°ë³¸ì ì¸ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

app/
layout.tsx â† ì „ì²´ HTMLì˜ ë¼ˆëŒ€
page.tsx â† ê¸°ë³¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
search/
layout.tsx â† /search ê²½ë¡œ ì „ìš© ë ˆì´ì•„ì›ƒ
setting/
page.tsx â† /search/setting í˜ì´ì§€

- `layout.tsx`ëŠ” í•´ë‹¹ í´ë” í•˜ìœ„ ëª¨ë“  í˜ì´ì§€ì— ê³µí†µìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.
- ì¤‘ì²© ë ˆì´ì•„ì›ƒë„ ì§€ì›ë©ë‹ˆë‹¤.
- layoutì´ ì—†ìœ¼ë©´ Nextê°€ ê¸°ë³¸ layoutì„ ìƒì„±í•©ë‹ˆë‹¤.

---

## ğŸ“Œ ë™ì  ë¼ìš°íŒ…

- `book/[id]`: `/book/1`, `/book/2`
- `book/[...id]`: `/book/1/1`, `/book/2/1` (ì„¸ê·¸ë¨¼íŠ¸)
- `book/[[...id]]`: ì˜µì…”ë„ ì„¸ê·¸ë¨¼íŠ¸, ë£¨íŠ¸ë¡œ ì ‘ê·¼ ì‹œ 404 ì—†ìŒ

`searchParams`ë¥¼ í†µí•´ propsë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“‚ Route Group (ë¼ìš°íŠ¸ ê·¸ë£¹)

ê²½ë¡œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” í´ë” ê·¸ë£¹ì…ë‹ˆë‹¤.

ì˜ˆì‹œ:
app/
(with-searchbar)/
search/
search/setting/

- ì†Œê´„í˜¸ `()`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
- ê³µí†µ ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

---

## ğŸ§  React Server Component (RSC)

- ì„œë²„ì—ì„œë§Œ ì‹¤í–‰ë˜ëŠ” ì»´í¬ë„ŒíŠ¸
- JS ë²ˆë“¤ í¬ê¸°ë¥¼ ì¤„ì´ê³  **TTI (Time To Interactive)** ê°œì„ 
- í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” Hydrationì´ í•„ìš” ì—†ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ì œì™¸

### âš ï¸ ì£¼ì˜ì‚¬í•­

- ë¸Œë¼ìš°ì € ì½”ë“œ í¬í•¨ âŒ
- í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„ ì»´í¬ë„ŒíŠ¸ `import` âŒ
- ì„œë²„ ì»´í¬ë„ŒíŠ¸ â†’ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” OK, ë‹¨ **ì§ë ¬í™” ë¶ˆê°€ëŠ¥í•œ props ì „ë‹¬ âŒ**

> **RSC Payload**: ì„œë²„ ì»´í¬ë„ŒíŠ¸ì˜ ê²°ê³¼ë¬¼(JSON í˜•íƒœ)

---

## ğŸš€ Navigationê³¼ Prefetch

- App RouterëŠ” RSC Payloadì™€ JS Bundleì„ í•¨ê»˜ ì „ì†¡
- `next/link` ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ prefetch ì ìš©
- í”„ë¡œê·¸ë˜ë§¤í‹± ë„¤ë¹„ê²Œì´ì…˜: `router.push("/target")`

---

## ğŸ“¡ ë°ì´í„° í˜ì¹­ ë°©ì‹ ë³€í™”

ì´ì „ì˜ `getServerSideProps`, `getStaticProps`ëŠ” ì‚¬ë¼ì¡Œê³ , **fetch API + async/await**ë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤.

```tsx
const res = await fetch("https://api.example.com/data", {
  cache: "force-cache",
  next: { revalidate: 10 },
});
const data = await res.json();
```

### ìºì‹œ ì˜µì…˜

| ì˜µì…˜                   | ì„¤ëª…                             |
| ---------------------- | -------------------------------- |
| `cache: "no-store"`    | ìºì‹œ ì•ˆ í•¨                       |
| `cache: "force-cache"` | ë¬´ì¡°ê±´ ìºì‹œ                      |
| `next.revalidate`      | ì¼ì • ì£¼ê¸°ë¡œ ê°±ì‹                  |
| `next.tags`            | ISR ê¸°ëŠ¥ì„ on-demandë¡œ ìœ ì‚¬ êµ¬í˜„ |

ğŸ” Request Memoization
ì„œë²„ ë Œë”ë§ ì¤‘ ì¤‘ë³µ ìš”ì²­ì„ ë§‰ê¸° ìœ„í•œ ì„ì‹œ ìºì‹œ

í˜ì´ì§€ ë Œë”ë§ì´ ëë‚˜ë©´ ìºì‹œ ì†Œë©¸

ğŸ“¦ Full Route Cache
ì •ì  í˜ì´ì§€(SSG) ê²°ê³¼ë¥¼ ì „ì²´ HTMLë¡œ ìºì‹œ

ë¹Œë“œ ì‹œì ì— ì‚¬ì „ ìƒì„±

dynamic ì¡°ê±´ì´ ì•„ë‹ˆë©´ ëª¨ë‘ staticìœ¼ë¡œ ê°„ì£¼

export const dynamic = 'force-static';

ë™ì  ê²½ë¡œ ì§€ì› ì˜ˆì‹œ:
export function generateStaticParams() {
return [{ id: "1" }, { id: "2" }];
}

ğŸ§­ í´ë¼ì´ì–¸íŠ¸ ë¼ìš°í„° ìºì‹œ
í´ë¼ì´ì–¸íŠ¸ê°€ í˜ì´ì§€ ì´ë™ ì‹œ ë ˆì´ì•„ì›ƒì„ ì¬ì‚¬ìš©

ì¤‘ë³µëœ ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ë¥¼ ìºì‹±í•˜ì—¬ ë Œë”ë§ ì„±ëŠ¥ ìµœì í™”

ğŸŒ€ Streaming & Loading UI
loading.tsx íŒŒì¼ì„ ì¶”ê°€í•˜ë©´ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ ì ìš©

ë¹ ë¥´ê²Œ ë Œë”ë§ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ë¨¼ì € ë¸Œë¼ìš°ì €ì— ì „ì†¡

// search/loading.tsx
export default function Loading() {
return <p>ë¡œë”© ì¤‘...</p>;
}

ğŸ›  Error Handling
error.tsx ì¶”ê°€ë¡œ íŠ¹ì • ì˜ì—­ ì—ëŸ¬ ì²˜ë¦¬ ê°€ëŠ¥

ì„œë²„ë“  í´ë¼ì´ì–¸íŠ¸ë“  error.tsxëŠ” ì ìš©ë¨

reset() í•¨ìˆ˜ ì œê³µ â†’ ì¬ë Œë” ì‹œë„ ê°€ëŠ¥

router.refresh()ì™€ í•¨ê»˜ ì‚¬ìš© ê¶Œì¥

onClick={() => {
startTransition(() => {
router.refresh();
reset();
});
}}

âœ… ì •ë¦¬

| í•­ëª©         | App Router íŠ¹ì§•                                         |
| ------------ | ------------------------------------------------------- |
| í˜ì´ì§€ êµ¬ì„±  | í´ë” + `page.tsx`, `layout.tsx`                         |
| ë°ì´í„° í˜ì¹­  | `fetch()` + cache/revalidate                            |
| RSC          | ì„œë²„ ì „ìš© ì»´í¬ë„ŒíŠ¸ë¡œ ë²ˆë“¤ ìµœì í™”                        |
| ë„¤ë¹„ê²Œì´ì…˜   | JS + RSC payload ì „ë‹¬, prefetch ê¸°ë³¸ ì ìš©               |
| ì—ëŸ¬ ì²˜ë¦¬    | `error.tsx`, `reset`, `router.refresh()` ì¡°í•©           |
| ìºì‹œ ì „ëµ    | `Full Route Cache`, `Client Router Cache`, `Memo`       |
| Streaming    | `loading.tsx`, ë¹„ë™ê¸° UI êµ¬ì„±                           |
| Segment ì˜µì…˜ | `dynamic`, `dynamicParams`, `force-static` ë“± ì„¤ì • ê°€ëŠ¥ |

ì´ ê¸€ì´ App Routerë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ê±°ë‚˜ ìƒˆë¡œìš´ Next.js í”„ë¡œì íŠ¸ë¥¼ êµ¬ì¶•í•  ë•Œ í™•ì‹¤í•œ ê¸°ë°˜ì´ ë˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤.

---
